<!DOCTYPE html>
<!-- Merchant.html -->
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CryptoNow Merchant</title>
    <link href="css/main.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
            href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;800&display=swap"
            rel="stylesheet"
    />
    <style>
        body {
            font-family: 'Nunito', sans-serif;
        }
    </style>
</head>
<body class="m-0 p-0 bg-[#0c0c0c] min-h-screen overflow-x-hidden relative">

<div id="header" class="fixed top-0 left-0 w-full z-50"></div>

<!-- Основной контент -->
<div class="pt-24 px-6 pb-8 min-h-screen">
    <!-- Контейнер для блоков сетей -->
    <div id="networksContainer" class="w-full max-w-7xl mx-auto">
        <div id="networksGrid" class="w-full bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl p-8 min-h-[75vh]">
            <!-- Сетка блоков внутри блока -->
            <div id="innerGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Первый блок с плюсом -->
                <div class="network-add-block bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl h-48 flex items-center justify-center cursor-pointer hover:bg-crypto-border hover:scale-105 transition-all duration-200">
                    <svg class="w-12 h-12 text-crypto-text-muted" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 6v12M6 12h12"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно для создания/редактирования сети -->
<div id="networkModal" class="fixed inset-0 hidden items-center justify-center z-[60]">
    <!-- Backdrop с блюром -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="networkModalBackdrop"></div>

    <!-- Модальное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-[90%] max-w-2xl max-h-[80vh] overflow-y-auto">
        <!-- Кнопка закрытия -->
        <button id="networkModalClose" class="absolute top-4 right-4 bg-[#0c0c0c] border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition z-10">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-crypto-text-muted">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>

        <!-- Содержимое модального окна -->
        <div class="bg-[#0c0c0c] p-8">
            <h2 class="text-white text-2xl font-bold mb-6 text-center">Store Chain</h2>

            <div class="space-y-4">
                <div>
                    <label class="block text-crypto-text-muted text-sm font-semibold mb-2">Chain Name</label>
                    <input type="text" id="networkName" placeholder="Enter chain name..."
                           class="w-full p-3 rounded-xl border-2 border-crypto-border bg-crypto-card text-white placeholder:text-crypto-text-muted focus:border-crypto-focus outline-none">
                </div>

                <div>
                    <label class="block text-crypto-text-muted text-sm font-semibold mb-2">Description</label>
                    <textarea id="networkDescription" placeholder="Your stores' services?..." rows="3"
                              class="w-full p-3 rounded-xl border-2 border-crypto-border bg-crypto-card text-white placeholder:text-crypto-text-muted focus:border-crypto-focus outline-none resize-none"></textarea>
                </div>

                <div class="flex justify-center pt-4">
                    <button id="saveNetwork" class="w-1/2 text-center crypto-border text-white font-bold border-2 border-white px-6 py-3 rounded-xl
                   hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Полноэкранное окно для просмотра сети -->
<div id="networkViewModal" class="fixed inset-0 hidden z-[70] flex items-center justify-center p-4">
    <!-- Backdrop с блюром -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="networkViewBackdrop"></div>

    <!-- Основное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-1/2 h-[90vh] overflow-y-auto">
        <!-- Верхняя панель -->
        <div class="bg-[#0c0c0c] p-4 border-b border-crypto-border flex items-center gap-4">
            <!-- Кнопка назад -->
            <button id="networkViewBack" class="bg-crypto-card border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-crypto-text-muted">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
            </button>

            <!-- Название сети -->
            <h2 id="networkViewTitle" class="text-white text-2xl sm:text-3xl lg:text-4xl font-bold flex-1 text-center mr-14">Network Name</h2>
        </div>

        <!-- Контент сети -->
        <div class="p-4 sm:p-6 lg:p-8">

            <div class="relative inline-block">
                <button id="MenuButton"
                        class="crypto-border text-white font-bold border-2 px-5 py-2 rounded-lg border-white hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out inline-flex items-center">
                    Menu
                    <svg class="w-5 h-5 ml-2 transition-transform duration-200" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
                <!-- Dropdown -->
                <div id="MenuDropdown" class="absolute hidden mt-2 bg-crypto-card border border-crypto-border rounded-lg w-full shadow-lg z-50">
                    <button id="AddMenuButton" class="w-full text-left px-4 py-2 font-medium hover:bg-crypto-border transition flex items-center gap-2 text-crypto-text-muted">Add Menu</button>
                    <div id="menusList" class="p-2 text-sm text-white whitespace-nowrap"></div>
                </div>
            </div>

            <div class="relative block mt-24">
                <button id="MarketsButton"
                        class="crypto-border text-white font-bold border-2 px-5 py-2 rounded-lg border-white hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out inline-flex items-center">
                    Markets
                    <svg class="w-5 h-5 ml-2 transition-transform duration-200" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
                <!-- Dropdown -->
                <div id="MarketsDropdown" class="absolute hidden mt-2 bg-crypto-card border border-crypto-border rounded-lg min-w-max shadow-lg z-50">
                    <button id="AddMarketButton"
                            class="w-full text-left px-4 py-2 font-medium hover:bg-crypto-border transition flex items-center gap-2 text-crypto-text-muted whitespace-nowrap">
                        Add Market
                    </button>
                    <div id="marketsList" class="p-2 text-sm text-white whitespace-nowrap"></div>
                </div>

            </div>

        </div>
    </div>
</div>

<!-- Market Modal -->
<div id="marketModal" class="fixed inset-0 hidden items-center justify-center z-[80]">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="marketModalBackdrop"></div>

    <!-- Модальное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-[90%] max-w-2xl max-h-[80vh] overflow-y-auto">
        <!-- Кнопка закрытия -->
        <button id="marketModalClose"
                class="absolute top-4 right-4 bg-[#0c0c0c] border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition z-10">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="text-crypto-text-muted">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>

        <!-- Содержимое -->
        <div class="bg-[#0c0c0c] p-8">
            <h2 class="text-white text-2xl font-bold mb-6 text-center">Add Physical Location</h2>

            <div class="space-y-4">
                <div>
                    <label class="block text-crypto-text-muted text-sm font-semibold mb-2">Store location</label>
                    <input type="text" id="marketName" placeholder="Kyiv. Khreshchatyk St. 1"
                           class="w-full p-3 rounded-xl border-2 border-crypto-border bg-crypto-card text-white
                                  placeholder:text-crypto-text-muted focus:border-crypto-focus outline-none">
                </div>

                <div class="flex justify-center pt-4">
                    <button id="saveMarket"
                            class="w-1/2 text-center crypto-border text-white font-bold border-2 border-white px-6 py-3 rounded-xl
                   hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Market View Modal -->
<div id="marketViewModal" class="fixed inset-0 hidden z-[70] flex items-center justify-center p-4">
    <!-- Backdrop с блюром -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="marketViewBackdrop"></div>

    <!-- Основное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-1/2 h-[90vh] overflow-y-auto">
        <!-- Верхняя панель -->
        <div class="bg-[#0c0c0c] p-4 border-b border-crypto-border flex items-center gap-4">
            <!-- Кнопка назад -->
            <button id="marketViewBack" class="bg-crypto-card border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-crypto-text-muted">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
            </button>

            <!-- Название маркета -->
            <h2 id="marketViewTitle" class="text-white text-2xl sm:text-3xl lg:text-4xl font-bold flex-1 text-center mr-14">Market Name</h2>
        </div>

        <!-- Контент маркета -->
        <div class="p-4 sm:p-6 lg:p-8">
            <div class="relative inline-block">
                <button id="TablesButton"
                        class="crypto-border text-white font-bold border-2 px-5 py-2 rounded-lg border-white hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out inline-flex items-center">
                    Tables
                    <svg class="w-5 h-5 ml-2 transition-transform duration-200" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6"/>
                    </svg>
                </button>
                <!-- Dropdown -->
                <div id="TablesDropdown" class="absolute hidden mt-2 bg-crypto-card border border-crypto-border rounded-lg min-w-max shadow-lg z-50">
                    <button id="AddTableButton"
                            class="w-full text-left px-4 py-2 font-medium hover:bg-crypto-border transition flex items-center gap-2 text-crypto-text-muted whitespace-nowrap">
                        Add Table
                    </button>
                    <div id="tablesList" class="p-2 text-sm text-white whitespace-nowrap"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Table View Modal -->
<div id="tableViewModal" class="fixed inset-0 hidden z-[70] flex items-center justify-center p-4">
    <!-- Backdrop с блюром -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="tableViewBackdrop"></div>

    <!-- Основное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-1/2 h-[90vh] overflow-y-auto">
        <!-- Верхняя панель -->
        <div class="bg-[#0c0c0c] p-4 border-b border-crypto-border flex items-center gap-4">
            <!-- Кнопка назад -->
            <button id="tableViewBack" class="bg-crypto-card border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-crypto-text-muted">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
            </button>

            <!-- Название стола -->
            <h2 id="tableViewTitle" class="text-white text-2xl sm:text-3xl lg:text-4xl font-bold flex-1 text-center mr-14">Table 1</h2>
        </div>

        <!-- Контент стола -->
        <div class="p-4 sm:p-6 lg:p-8">
            <div class="text-center text-crypto-text-muted">
                <p>Table management coming soon...</p>
            </div>
        </div>
    </div>
</div>

<!-- Menu Modal -->
<div id="menuModal" class="fixed inset-0 hidden items-center justify-center z-[80]">
    <!-- Backdrop -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="menuModalBackdrop"></div>

    <!-- Модальное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-[90%] max-w-2xl max-h-[80vh] overflow-y-auto">
        <!-- Кнопка закрытия -->
        <button id="menuModalClose"
                class="absolute top-4 right-4 bg-[#0c0c0c] border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition z-10">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                 class="text-crypto-text-muted">
                <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
        </button>

        <!-- Содержимое -->
        <div class="bg-[#0c0c0c] p-8">
            <h2 class="text-white text-2xl font-bold mb-6 text-center">Menu</h2>

            <div class="space-y-4">
                <div>
                    <label class="block text-crypto-text-muted text-sm font-semibold mb-2">Name</label>
                    <input type="text" id="menuName" placeholder="e.g. Main Menu"
                           class="w-full p-3 rounded-xl border-2 border-crypto-border bg-crypto-card text-white
                                  placeholder:text-crypto-text-muted focus:border-crypto-focus outline-none">
                </div>

                <div class="flex justify-center pt-4">
                    <button id="saveMenu"
                            class="w-1/2 text-center crypto-border text-white font-bold border-2 border-white px-6 py-3 rounded-xl
                   hover:border-gray-300 hover:scale-95 transition duration-300 ease-in-out">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- NEW: Menu View Modal -->
<div id="menuViewModal" class="fixed inset-0 hidden z-[70] flex items-center justify-center p-4">
    <!-- Backdrop с блюром -->
    <div class="absolute inset-0 bg-black/30 backdrop-blur-sm" id="menuViewBackdrop"></div>

    <!-- Основное содержимое -->
    <div class="relative bg-[#0c0c0c] border-2 border-crypto-border rounded-2xl w-1/2 h-[90vh] overflow-y-auto">
        <!-- Верхняя панель -->
        <div class="bg-[#0c0c0c] p-4 border-b border-crypto-border flex items-center gap-4">
            <!-- Кнопка назад -->
            <button id="menuViewBack" class="bg-crypto-card border border-crypto-border rounded-lg w-10 h-10 flex items-center justify-center hover:bg-crypto-border hover:scale-105 transition">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-crypto-text-muted">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
            </button>

            <!-- Название меню -->
            <h2 id="menuViewTitle" class="text-white text-2xl sm:text-3xl lg:text-4xl font-bold flex-1 text-center mr-14">Menu Name</h2>
        </div>

        <!-- Контент меню -->
        <div class="relative bg-[#0c0c0c] ml-12 mt-24 border-2 border-crypto-border rounded-2xl w-[90%]  max-h-[80vh] overflow-y-auto">

            <!-- Содержимое -->
            <div class="bg-[#0c0c0c] p-8">

            </div>
        </div>
    </div>
</div>

<script type="module" src="/typescript/ConnectWallet.ts"></script>
<script type="module" src="/typescript/Merchant.ts"></script>

<script>
    fetch('header.html')
        .then(res => res.text())
        .then(html => {
            document.getElementById('header').innerHTML = html;
        })
        .catch(e => console.error('Header load error:', e));
</script>

</body>
</html>